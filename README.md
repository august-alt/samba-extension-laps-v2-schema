# Настройка LAPS для Samba-AD

Нативный LAPS - это решение для управления паролями для компьютеров Windows, которые являются членами домена Active Directory.

## Примечание

Ниже приведенные команды выполняются на машине, которая держит роль FSMO Schema (используйте `samba-tool fsmo show`, чтобы найти правильную машину).

## Внимание

Возможно, будет необходимо сделать резервную копию вашего AD перед внесением изменений в схему. 
Кроме того, важно отметить, что удаление расширения схемы в Active Directory невозможно.

## Описание работы install-laps-v2-schema.py

Данный скрипт предназначен для обновления файлов схемы Native LAPS в Samba.
Он копирует файлы из источника в временную директорию, заменяет домен на указанный пользователем и устанавливает расширения схемы
используя команды ldbadd и ldbmodify.

## Параметры запуска

Скрипт принимает следующие параметры:

    --domain: имя домена (например: dc=domain,dc=alt)
    --samfile: путь к файлу sam.ldb Samba (по умолчанию: /var/lib/samba/private/sam.ldb)

## Примеры использования

Запуск скрипта с заданным доменом и файлом sam.ldb: 
```bash    
python install-laps-v2-schema.py --domain "dc=domain,dc=alt" --samfile "/var/lib/samba/private/sam.ldb"
```